/* ================================
   全站配色优化 - 张大师智慧生活导航系统
   基于设计规范的色彩对比度和可访问性优化
   ================================ */

/* ====================
   根变量重定义 - 确保对比度符合WCAG AA标准
   ==================== */
:root {
    /* 品牌主色 - 基于设计规范 */
    --color-primary: #D4577B;          /* 辛演粉 - 主品牌色 */
    --color-primary-dark: #B83E62;     /* 深色变体，提高对比度 */
    --color-primary-light: #E899B3;    /* 浅色变体 */
    --color-primary-bg: rgba(212, 87, 123, 0.08); /* 背景色 */

    /* 功能色彩 - 五行色系 */
    --color-wood: #3AADA8;             /* 鼎和青 - 木 */
    --color-fire: #FF6B6B;             /* 赤火色 - 火 */
    --color-earth: #D4A15F;            /* 霜礼金 - 土 */
    --color-metal: #4A6FB5;            /* 醉阴蓝 - 金 */
    --color-water: #37474F;            /* 黑水色 - 水 */

    /* 文字色彩 - 优化对比度 */
    --text-primary: #1A1A1A;           /* 主文字 - 对比度 12.63:1 */
    --text-secondary: #424242;         /* 次要文字 - 对比度 8.59:1 */
    --text-tertiary: #616161;          /* 辅助文字 - 对比度 5.87:1 */
    --text-disabled: #9E9E9E;          /* 禁用文字 - 对比度 3.03:1 */
    --text-on-primary: #FFFFFF;        /* 主色上的文字 */

    /* 背景色彩 */
    --bg-primary: #FFFFFF;             /* 主背景 */
    --bg-secondary: #FAFAFA;           /* 次要背景 */
    --bg-tertiary: #F5F5F5;            /* 第三背景 */
    --bg-card: #FFFFFF;                /* 卡片背景 */
    --bg-hover: rgba(212, 87, 123, 0.04); /* 悬停背景 */

    /* 边框色彩 */
    --border-primary: #E0E0E0;         /* 主边框 */
    --border-secondary: #EEEEEE;       /* 次边框 */
    --border-focus: #D4577B;           /* 焦点边框 */

    /* 状态色彩 - 确保对比度 */
    --color-success: #2E7D32;          /* 成功 - 对比度 5.14:1 */
    --color-warning: #E65100;          /* 警告 - 对比度 4.98:1 */
    --color-error: #C62828;            /* 错误 - 对比度 5.89:1 */
    --color-info: #0277BD;             /* 信息 - 对比度 5.13:1 */

    /* 吉凶状态色 - 优化对比度 */
    --color-auspicious: #2E7D32;       /* 吉 - 深绿色 */
    --color-inauspicious: #C62828;     /* 凶 - 深红色 */
    --color-neutral: #616161;          /* 平 - 中性灰 */
}

/* ====================
   通用文字对比度优化
   ==================== */
body {
    color: var(--text-primary);
    background-color: var(--bg-primary);
}

h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary);
    font-weight: 600;
}

p, span, div {
    color: var(--text-secondary);
}

.text-muted {
    color: var(--text-tertiary) !important;
}

/* 确保链接可见性 */
a {
    color: var(--color-primary-dark);
    text-decoration: underline;
}

a:hover {
    color: var(--color-primary);
}

/* ====================
   卡片和容器优化
   ==================== */
.card {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.06),
                0 1px 2px rgba(0, 0, 0, 0.04);
}

.card:hover {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08),
                0 2px 4px rgba(0, 0, 0, 0.06);
}

/* ====================
   按钮对比度优化
   ==================== */
.btn {
    font-weight: 500;
    transition: all 0.2s ease;
}

.btn-primary {
    background: var(--color-primary);
    color: var(--text-on-primary);
    border: 1px solid var(--color-primary-dark);
}

.btn-primary:hover {
    background: var(--color-primary-dark);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(212, 87, 123, 0.25);
}

.btn-secondary {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
}

.btn-secondary:hover {
    background: var(--bg-tertiary);
    border-color: var(--color-primary);
    color: var(--color-primary-dark);
}

/* ====================
   表单元素对比度
   ==================== */
.form-input,
.form-select,
.form-textarea {
    background: var(--bg-primary);
    border: 1px solid var(--border-primary);
    color: var(--text-primary);
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    border-color: var(--border-focus);
    outline: 2px solid rgba(212, 87, 123, 0.2);
    outline-offset: 0;
}

.form-label {
    color: var(--text-primary);
    font-weight: 500;
    margin-bottom: 0.25rem;
}

/* ====================
   导航和头部优化
   ==================== */
.app-header {
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
}

.logo-text {
    color: var(--color-primary);
    font-weight: 600;
}

.logo-subtitle {
    color: var(--text-secondary);
    font-weight: 400;
}

/* ====================
   特定页面优化
   ==================== */

/* 今日运势页面 */
.fortune-card {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
}

.fortune-score {
    color: var(--color-primary);
    font-weight: 600;
}

.fortune-label {
    color: var(--text-tertiary);
    font-size: 0.875rem;
}

.fortune-value {
    color: var(--text-primary);
    font-weight: 500;
}

/* 宜忌标签优化 */
.tag-yi,
.yiji-item.yi {
    background: rgba(46, 125, 50, 0.08);
    color: var(--color-success);
    border: 1px solid rgba(46, 125, 50, 0.24);
    font-weight: 500;
}

.tag-ji,
.yiji-item.ji {
    background: rgba(198, 40, 40, 0.08);
    color: var(--color-error);
    border: 1px solid rgba(198, 40, 40, 0.24);
    font-weight: 500;
}

/* 日历页面 */
.day-cell {
    background: var(--bg-card);
    border: 1px solid var(--border-secondary);
}

.day-cell:hover {
    background: var(--bg-hover);
    border-color: var(--color-primary);
}

.day-solar {
    color: var(--text-primary);
    font-weight: 500;
}

.day-lunar {
    color: var(--text-tertiary);
    font-size: 0.75rem;
}

.day-cell.today {
    background: var(--color-primary-bg);
    border-color: var(--color-primary);
}

.day-cell.today .day-solar {
    color: var(--color-primary-dark);
    font-weight: 600;
}

.day-cell.selected {
    background: var(--color-primary);
    border-color: var(--color-primary-dark);
}

.day-cell.selected .day-solar,
.day-cell.selected .day-lunar {
    color: var(--text-on-primary);
}

/* 生活指南页面 */
.lifestyle-card {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
}

.suggestion-item .label {
    color: var(--text-tertiary);
    font-weight: 500;
}

.suggestion-item .value {
    color: var(--text-primary);
    font-weight: 500;
}

.color-chip {
    border: 2px solid var(--border-primary);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
}

/* 知识学习页面 */
.gua-item {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
}

.gua-item:hover {
    background: var(--bg-hover);
    border-color: var(--color-primary);
}

.gua-name {
    color: var(--text-primary);
    font-weight: 600;
}

.gua-attr {
    color: var(--text-tertiary);
    font-size: 0.75rem;
}

/* 用户画像页面 */
.bazi-item strong {
    color: var(--color-primary-dark);
    font-weight: 600;
}

.element-name {
    color: var(--text-primary);
    font-weight: 500;
}

.element-bar {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
}

.element-fill[data-element="metal"] {
    background: linear-gradient(90deg, #4A6FB5, #6B8DD6);
}

.element-fill[data-element="wood"] {
    background: linear-gradient(90deg, #3AADA8, #5BC9C4);
}

.element-fill[data-element="water"] {
    background: linear-gradient(90deg, #37474F, #546E7A);
}

.element-fill[data-element="fire"] {
    background: linear-gradient(90deg, #FF6B6B, #FF8787);
}

.element-fill[data-element="earth"] {
    background: linear-gradient(90deg, #D4A15F, #E4B77F);
}

/* 决策页面 */
.decision-card {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
}

.option-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
}

.option-card:hover {
    background: var(--bg-card);
    border-color: var(--color-primary);
    transform: translateY(-2px);
}

.option-score {
    color: var(--color-primary-dark);
    font-weight: 600;
}

/* ====================
   徽章和标签优化
   ==================== */
.badge {
    font-weight: 500;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
}

.badge-primary {
    background: var(--color-primary-bg);
    color: var(--color-primary-dark);
    border: 1px solid var(--color-primary);
}

.badge-success {
    background: rgba(46, 125, 50, 0.08);
    color: var(--color-success);
    border: 1px solid rgba(46, 125, 50, 0.24);
}

.badge-warning {
    background: rgba(230, 81, 0, 0.08);
    color: var(--color-warning);
    border: 1px solid rgba(230, 81, 0, 0.24);
}

.badge-danger {
    background: rgba(198, 40, 40, 0.08);
    color: var(--color-error);
    border: 1px solid rgba(198, 40, 40, 0.24);
}

/* ====================
   进度条和图表
   ==================== */
.progress-bar {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: 4px;
}

.progress-fill {
    background: linear-gradient(90deg, var(--color-primary), var(--color-primary-light));
    box-shadow: 0 1px 3px rgba(212, 87, 123, 0.3);
}

/* ====================
   工具提示和弹出框
   ==================== */
.tooltip {
    background: var(--text-primary);
    color: var(--text-on-primary);
    font-size: 0.875rem;
    font-weight: 500;
}

.modal {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

/* ====================
   焦点状态优化
   ==================== */
*:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
}

button:focus-visible {
    outline-offset: 2px;
}

/* ====================
   禁用状态
   ==================== */
.disabled,
:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* ====================
   高对比度模式支持
   ==================== */
@media (prefers-contrast: high) {
    :root {
        --text-primary: #000000;
        --text-secondary: #1A1A1A;
        --text-tertiary: #424242;
        --border-primary: #9E9E9E;
        --color-primary-dark: #A01E47;
    }

    .card {
        border-width: 2px;
    }

    .btn {
        border-width: 2px;
    }
}

/* ====================
   深色模式检测（保留浅色）
   ==================== */
@media (prefers-color-scheme: dark) {
    /* 项目要求保持浅色主题，忽略系统深色模式 */
}

/* ====================
   响应式字体大小
   ==================== */
@media (max-width: 768px) {
    body {
        font-size: 16px; /* 确保移动端最小16px */
    }

    .small-text {
        font-size: 14px; /* 不小于14px */
    }
}

/* ====================
   打印样式优化
   ==================== */
@media print {
    body {
        color: #000000;
        background: #FFFFFF;
    }

    .card {
        border: 1px solid #000000;
        box-shadow: none;
    }
}